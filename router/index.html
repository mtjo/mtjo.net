<!DOCTYPE html>
<html>    
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="css/framework7.ios.min.css">
    <link rel="stylesheet" href="css/framework7.ios.colors.min.css">
    <link rel="stylesheet" href="css/framework7.material.min.css">
    <link rel="stylesheet" href="css/framework7.material.colors.min.css">
    <link rel="stylesheet" href="css/upscroller.css">
    <link rel="stylesheet" href="css/my-app.css">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.js"></script>
  <script src="http://app.miwifi.com/js/router_request.js"></script>
  <title>百度云同步设置</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link href="css/reset.css" rel="stylesheet" type="text/css">
    <link href="css/mui-switch.css" rel="stylesheet" type="text/css">

</head>
<body>
<div class="views">

    <div class="view view-main">
        <div class="navbar">
            <div class="navbar-inner">
            <table width="100%" ><tr>
            <td>                <font colour="#FFFFFF">功能开启</font></td>

                <td align="right"><input id = "status" width="150" class="mui-switch mui-switch-anim" type="checkbox">  </td>
                </tr></table>
                                	
            </div>
        </div>
        <a href="javascript:" style="display: none;" class="floating-button addbtn color-pink"><i class="icon icon-plus"></i></a>
        <div id="configlist" style="display: none;" class="pages navbar-through toolbar-through">
            <div data-page="index" class="page">

                <!--内容开始-->

                <div class="page-content">

                    <div class="list-block">
                          <ul>

                          </ul>


                        <div class="row">
                            <div class="col-100 ">
                                <button class="button button-fill color-red" style="width: 100%">保存</button>
                            </div>
                        </div>

                    </div>

                </div>
                <!--内容结束-->
            </div>
		</div>
		
		    	<!--绑定-->
				<div id="intisync" style="width:100%;height: 100%; background-color: #ffffff;" class="pages navbar-through toolbar-through">
                <div class="page-content">

                    <div class="list-block" style="padding: 20px;">
                    <center><input id="bind_pcs" type="button" value = "绑定百度云"/></center>
                    
                    
                    <hr />
                    
                    <center><strong>帮助</strong></center>
								[上传]:<br/>
								只检查本地文件并上传修改过的文件，忽略远端的所有修改或删除，远端删除的也不再上传<br/>
								[上传+]:<br/>
								远端是本地的完全镜像，忽略远端的修改，远端删除的文件在下一次同步时将上传，远端新增的文件如果本地不存在，将不做任何变化<br/>
								[下载]:<br/>
								只检查远端文件是否修改，如有修改下载到本地，忽略本地的修改；如本地文件被删除，将不再下载<br/>
								[下载+]:<br/>
								检查远端和本地文件，如远端有修改，下载到本地，忽略本地的修改；如本地有文件被删除，将重新下载<br/>
								[同步]:<br/>
								同时检查远端和本地文件，如只有远端被修改，则下载到本地；如只有本地修改，则上传到远端；如本地和远端都被修改，则以冲突设置方式为准。<br/>
								</div>
								</div>
				</div>
				<!--绑定-->

    </div>
</div>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/framework7.min.js"></script>
<!-- Path to your app js-->
<script type="text/javascript" src="js/upscroller.js"></script>
<script type="text/javascript" src="js/my-app.js"></script>
<script>
    $(".addbtn").click(function(){

        $("ul").append(
                '<li class="swipeout" >'+
                '<div class="item-content">'+
                '<div class="item-inner">'+
                '<div class="item-title label">' +
                '<textarea name="" id="" placeholder="请办输入路由器文件路径" >'+
                '</textarea>'+
                '</div>'+
                '<div class="item-input">'+
                '<select><option value=0>上传</option><option value=1>上传+</option><option value=2>下载</option><option value=3>下载+</option><option value=4>同步</option></select> '+
                '</div>'+
                '<div class="item-title label">' +
                '<textarea name="" id="" placeholder="请办输入百度云文件路径" >'+
                '</textarea>'+
                '</div>'+
                '<div class="item-input">'+
                '<input style = "float:right;" width="150" class="mui-switch mui-switch-anim" type="checkbox">'+
                '</div>'+
                '</div>'+
                '<div class="swipeout-actions-right">'+
                '<a href="#" class="swipeout-delete">Delete</a>'+
                '</div>'+
                '</div>'+
                '</li>'

        );

        $('.item-input').each(function(i){
            console.log($(this).find('img:first').attr('id','zoom'+i));
            console.log($(this).find('img:first').next().attr('id','add'+i));
        })

    });

</script>


</body>



<script type="text/javascript">
var appId = "2882303761517489490";
$(document).ready(function() {
  $("#authorizeButton").click(function(){
    if (!routerRequest.hasAccessToken()) {
      routerRequest.authorize(window.location.href, appId);
    }
  });
  var status=0;
  var access_token;
	 routerRequest.request({  
      path: "/api-third-party/service/datacenter/config_info",
      type: "GET",
      data: {
        appId: appId,
		key:"status"
      },
      success: function(data) {
        var response = jQuery.parseJSON(data);
        if (response.code != 0) {
          console.log(data);
          alert("错误：" + response.msg);
          return;
        }
        status = response.value;
        show_hide(status);
		  
      },
      error: function(data) {
        console.log("error:", data);
        alert("网络失败");
      }
    });

	$("#status").change(function(){
		if(status==1){
			status = 0
		}else{
			status = 1
		}
	routerRequest.request({  
      path: "/api-third-party/service/datacenter/set_config",
      type: "GET",
      data: {
        appId: appId,
		key:"status",
		value:status
      },
      success: function(data) {
        var response = jQuery.parseJSON(data);
        if (response.code != 0) {
          console.log(data);
          alert("错误：" + response.msg);
          return;
        }
        show_hide(status);
      },
      error: function(data) {
        console.log("error:", data);
        alert("网络失败");
      }
    });
});	

function show_hide(show){
	if(show==1){
	    $("#status").attr("checked","checked");
	    $("#syncset").show();
	    $("#configlist").show();
	    $(".addbtn").show();
	    $("#intisync").hide();
	} else {
		$("#status").removeAttr("checked");
	    $("#syncset").hide();	
	    $("#configlist").hide();
	    $(".addbtn").hide();
	    $("#intisync").show();
	}
	
};	

$("#bind_pcs").click(function(){
	location = 'https://openapi.baidu.com/oauth/2.0/authorize?response_type=code&client_id=2Eo2GXRzUqPXO7MzS9VIrI3o&redirect_uri=http://mtjo.net/router&display=dialog'
})
	
});
	
	
	
	

</script>
</html>
